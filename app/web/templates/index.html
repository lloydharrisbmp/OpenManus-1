<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BMP Advisory - Financial Planning Suite</title>
    <link rel="icon" type="image/svg+xml" href="/static/img/favicon.svg">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/static/css/main.css">
    <style>
        body {
            font-family: 'Open Sans', sans-serif;
            background-color: #f8f9fa;
            color: #343a40;
        }
        .chat-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        .chat-header {
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 2px solid #0d6efd;
            padding-bottom: 10px;
        }
        .chat-messages {
            height: 500px;
            overflow-y: auto;
            background-color: white;
            border-radius: 10px;
            padding: 15px;
            border: 1px solid #dee2e6;
            margin-bottom: 20px;
        }
        .user-message {
            background-color: #e9f5ff;
            padding: 10px 15px;
            border-radius: 15px;
            margin-bottom: 15px;
            text-align: right;
            max-width: 80%;
            margin-left: auto;
        }
        .bot-message {
            background-color: #f0f0f0;
            padding: 10px 15px;
            border-radius: 15px;
            margin-bottom: 15px;
            max-width: 80%;
        }
        .thinking-steps {
            background-color: #e8f4ff;
            padding: 10px 15px;
            border-radius: 15px;
            margin-bottom: 15px;
            max-width: 90%;
            font-family: monospace;
            white-space: pre-wrap;
            border-left: 3px solid #0d6efd;
        }
        .file-preview {
            margin-top: 10px;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        .file-item {
            padding: 5px 10px;
            background-color: #e2e3e5;
            border-radius: 5px;
            display: flex;
            align-items: center;
            font-size: 0.8rem;
        }
        .file-item button {
            border: none;
            background: transparent;
            color: #dc3545;
            font-size: 0.8rem;
            margin-left: 5px;
            cursor: pointer;
        }
        .upload-progress {
            margin-top: 10px;
            display: none;
        }
        .typing-indicator {
            padding: 10px 15px;
            border-radius: 15px;
            margin-bottom: 15px;
            max-width: 80%;
            display: none;
        }
        .typing-indicator span {
            display: inline-block;
            width: 8px;
            height: 8px;
            background-color: #0d6efd;
            border-radius: 50%;
            margin-right: 3px;
            animation: typing 1s infinite ease-in-out;
        }
        .typing-indicator span:nth-child(2) {
            animation-delay: 0.2s;
        }
        .typing-indicator span:nth-child(3) {
            animation-delay: 0.4s;
        }
        @keyframes typing {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Left Sidebar - Conversations -->
        <div class="conversations-sidebar">
            <div class="sidebar-header">
                <h3>Conversations</h3>
                <button id="newConversationBtn" class="new-conversation-btn" title="New conversation">
                    <i class="fas fa-plus"></i>
                </button>
            </div>
            <div class="search-container">
                <input type="text" id="conversationSearch" placeholder="Search conversations...">
                <i class="fas fa-search"></i>
            </div>
            <div id="conversationsList" class="conversations-list">
                <div class="conversation-empty-state">
                    <p>No conversations yet</p>
                    <button id="startConversationBtn" class="start-conversation-btn">Start a conversation</button>
                </div>
                <!-- Conversations will be added here dynamically -->
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Header -->
            <div class="main-header">
                <div class="app-logo">
                    <img src="/static/img/logo.svg" alt="BMP Advisory Logo">
                </div>
                <div class="conversation-title-container">
                    <input type="text" id="conversationTitle" placeholder="Conversation Title" disabled>
                    <button id="saveConversationTitle" class="save-title-btn" title="Save title">
                        <i class="fas fa-check"></i>
                    </button>
                </div>
            </div>

            <!-- Chat Container -->
            <div class="chat-container">
                <div id="chatMessages" class="chat-messages">
                    <!-- Welcome message -->
                    <div class="bot-message">
                        <div class="message-content">
                            <h3>Welcome to BMP Advisory Financial Planning Suite</h3>
                            <p>I'm your financial planning assistant, ready to help with sophisticated financial planning and investment advice.</p>
                            <p>You can ask about:</p>
                            <ul>
                                <li>Tax optimization strategies</li>
                                <li>Investment portfolio analysis</li>
                                <li>Retirement planning</li>
                                <li>Estate planning and succession</li>
                                <li>Financial reports and compliance</li>
                            </ul>
                            <p>How can I assist you today?</p>
                        </div>
                        <div class="message-time">Just now</div>
                    </div>
                </div>
                
                <!-- Chat Input -->
                <div class="chat-input-container">
                    <div id="filePreview" class="file-preview"></div>
                    <div id="uploadProgress" class="upload-progress" style="display: none;">
                        <div class="progress">
                            <div class="progress-bar" role="progressbar" style="width: 0%"></div>
                        </div>
                    </div>
                    <form id="chatForm" class="chat-form">
                        <div class="input-group">
                            <label for="fileInput" class="file-upload-btn" title="Upload files">
                                <i class="fas fa-paperclip"></i>
                            </label>
                            <input type="file" id="fileInput" multiple style="display: none;">
                            <textarea id="messageInput" placeholder="Message BMP Advisory..." rows="1"></textarea>
                            <button type="submit" class="send-btn" title="Send message">
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Right Sidebar - Files and Progress -->
        <div class="right-sidebar">
            <div class="sidebar-section">
                <h3>Project Progress</h3>
                <div id="progressTracker" class="progress-tracker">
                    <div class="empty-progress-state">
                        <p>No active project</p>
                    </div>
                </div>
            </div>
            <div class="sidebar-section">
                <h3>Documents</h3>
                <div id="fileList" class="file-list">
                    <!-- Files will be added here dynamically -->
                </div>
                <div id="emptyFilesMessage" class="empty-files-message">
                    <p>No documents yet</p>
                </div>
            </div>
        </div>
    </div>

    <!-- New Conversation Modal -->
    <div class="modal fade" id="newConversationModal" tabindex="-1" aria-labelledby="newConversationModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="newConversationModalLabel">New Conversation</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label for="newConversationTitle" class="form-label">Conversation Title</label>
                        <input type="text" class="form-control" id="newConversationTitle" placeholder="Financial Planning Session">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="createConversationBtn" style="background-color: #004b87; border-color: #004b87;">Create</button>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked@4.3.0/marked.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
    <script src="/static/js/main.js"></script>
</body>
</html> 